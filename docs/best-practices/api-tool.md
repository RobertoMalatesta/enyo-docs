% The API Viewer

The [Enyo API Viewer](http://enyojs.com/api), also known as the API Reference or
API Tool, is an Enyo application that enables a live view of documentation drawn
from the source code of Enyo core and its related libraries.

The API Viewer looks at all publicly visible kinds, functions, and properties,
and displays them along with their documentation comments.  In addition, the
ancestry of kinds is shown, including inherited methods and properties.

For the curious, source code for the viewer app is available on GitHub in the
enyojs project's [api-tool](https://github.com/enyojs/api-tool) repo.

## Using the API Viewer

### Properties, Events, and Methods

The primary purpose of the API Viewer is to present information about the
object properties, events, and methods that Enyo and its related libraries
(Moonstone, Layout, etc.) make available to application developers.  When you
view the information for a particular kind, you will see all of its public
elements under the heading "Properties".

All of the kind's publicly-accessible object properties are displayed together
in a block called `"published"`, which corresponds to a block of the same name
in the source code.  We refer to these properties as "published properties";
each one should be documented with a brief description.

Similarly, all the public events generated by the kind are presented in a block
called `"events"`, which corresponds to the `events` block in source.  Each
event should be documented with a description of when it is fired, as well as
descriptions of any properties that are set on the accompanying object
(`inEvent`).

Finally, public methods are not presented in a block (in either the API Viewer
or source code), but are instead listed individually on the same level as the
`published` and `events` blocks.

### Other Elements

As you look through the API documentation, you may come across elements that are
not intended to be part of the API, but appear in the Viewer because the source
code has not been labeled with the correct [visibility](#visibility) state.
Some of these are as follows:

* `classes`: This is a space-delimited string containing the default CSS styles
    to be applied to instances of this kind.  For example, in `moon.Drawer` we
    see the following:

    ```
        classes: "moon-drawer moon-neutral"
    ```

    This means that the CSS classes `moon-drawer` and `moon-neutral` are applied
    to each instance of `moon.Drawer` by default.

    To see the actual CSS rules contained in the Moonstone styles, look in the
    `css` folder in the `moonstone` repo.  The `.css` files there are generated
    from the contents of the `.less` files.

* `defaultKind`: This is the default kind for any new component created inside
    the current kind.  For example, the `defaultKind` of `moon.TooltipDecorator`
    is `moon.Button`.  This means that the kind of any component created inside
    a TooltipDecorator will be `moon.Button` unless a different value is
    supplied for its `kind` property.

    This is the case whether the components are created from the `components`
    block when the TooltipDecorator is instantiated...

    ```
        components: [
            {name: "myButton"},
            {name: "buttonTip", kind: "moon.Tooltip", content: "I'm a Tooltip."}
        ]
    ```

    ...or they are added to the object dynamically at runtime...  

    ```
        myTooltipDecorator.createComponent({name: "myButton"});
        myTooltipDecorator.createComponent({name: "buttonTip", kind: "moon.Tooltip",
            content: "I'm a Tooltip."});
    ```

    In each case, we end up with a `moon.Button` object named `"myButton"` and a
    `moon.Tooltip` object named `"buttonTip"`.

* `handlers`: The `handlers` block lists any events (coming from any of its
    children) that a component will listen for; each event is mapped to an
    internal handler method.  This block is always private to the component and
    should always be marked as `@protected`.  Documentation is not required for
    either the block as a whole, or the individual event mappings.  Instead, the
    handled events should be documented at their point of origin.  

* `mixins`: Mixins are bundles of related properties and functions (and
    sometimes other things like bindings and CSS classes) that may be added to a
    kind all at once, for convenience.  By convention, mixins are housed in
    files with names ending in `"Support.js"` (`BindingSupport.js`,
    `ComputedSupport.js`, etc.).

    The `mixins` block itself should not be documented for the API Viewer, nor
    should the individual mixins it contains.  For more information on a
    particular mixin, look up its filename under the API Viewer's "Modules" tab.

## Documenting Code for the API Viewer

### What to Document

When contributing a new kind, be sure to include a summary of the kind, along
with documentation for all events, published properties, and public methods.
Details on how these API elements should be documented are provided in the
following section, [How to Document](#how-to-document).

It is not necessary to provide comments for items that are private to the kind,
such as protected properties, protected methods, and the contents of the
`handlers` block.  (For more on the difference between the public and protected
states, see [Visibility](#visibility).)

### How to Document

Here are some guidelines to follow when creating (and formatting) documentation
for different parts of the API.

#### Published Properties

* Provide a brief description of the property.  In most cases, the description
    should be less than one sentence in length.

    ```
        //* The URL of the image
        src: "",
        //* The alt text of the image
        alt: "",
        ...
    ```

* When a property cannot be adequately described in less than one sentence,
    provide one or two *complete* sentences (each with a subject, verb, and a
    period at the end).

* When documenting a property that accepts only specific string values, list the
    valid string values, e.g.:

    ```
        /**
            The position of the caption; valid values are "top", "left",
            "bottom", and "right"
        */
        side: "top",
        ...
    ```

#### Public Methods

* Provide a brief description of what the method does.  By convention, the
    description begins with a verb in the present tense and is punctuated as a
    full sentence, with a period at the end, e.g.:

    ```
        //* Adds _pressed_ CSS class.
        depress: function() {
            this.addClass("pressed");
        },
        ...
    ```

    Note that the names of kinds (when the namespace is included), properties,
    methods, and CSS classes are underscored, making them appear as _italicized_
    in the API Viewer.

* In some cases, instead of describing what a method does, it is more helpful to
    describe how or when it is used.

    ```
        //* Override to handle potential child components.
        contentChanged: function() {
            if (this.$.client) {
                this.$.client.setContent(this.getContent());
            } else {
                this.inherited(arguments);
            }
        }
    ```

    Here the verb is in the second-person imperative (command) form, with the
    command directed at the reader (e.g., "Override (this) if you want to do
    such-and-such.").

#### Events

* At a minimum, each event in the `events` block should include a comment
    stating when it is fired.

    ```
        events: {
            //* Fires when either the main drawer or the control drawer is activated.
            onActivate: "",
            //* Fires when either the main drawer or the control drawer is deactivated.
            onDeactivate: ""
        },
        ...
    ```

* If the Event object that accompanies an event has special properties that a
    handler may want to access, these should also be documented.

    ```
        /**
            Fires when an item is selected.

            _inEvent.key_ is whatever key was used to register the selection
           (usually a row index).

            _inEvent.data_ references data registered with this key by the code
            that made the original selection.
        */
        onSelect: "",
        ...
    ```

### Visibility

There are two visibility states in Enyo, denoted by pragmas that control the
visibility of the properties they precede.

* **Public**

    This is the default visibility state.  Any public code will be shown in the
    API Viewer.

    To mark an item as public, use the pragma `//* @public`:

    ```
        //* @public
        //* Returns true if the control is focused.
        hasFocus: function() {
            if (this.hasNode()) {
                return document.activeElement === this.node;
            }
        }
    ```

* **Protected**

    In this state, items are hidden from the API viewer.  Protected status is
    usually used for functions and properties that are not meant to be modified.

    To mark an item as protected, use the pragma `//* @protected`:

    ```
        //* @protected
        tag: "img",
        attributes: {
            draggable: "false"
        },
        create: function() {
            if (this.noEvents) {
                delete this.attributes.onload;
                delete this.attributes.onerror;
            }
            this.inherited(arguments);
        }
    ```

### Formatting (Markdown)

All documentation for the viewer is written in
[Markdown](http://daringfireball.net/projects/markdown/), a lightweight
formatting language.

Enyo uses a special commenting syntax that allows for differentiation between
comments that are to be included in documentation and those that are not.

To have a Markdown-formatted comment appear as documentation in the API Viewer,
add a `*` to the comment syntax:

- Single Line Comment

    ```
        //* This is an Enyo documentation comment in _Markdown_.
    ```

- Multiline Comment

    ```
        /**
            This is an Enyo documentation comment in _Markdown_ that spans
            multiple lines.
        */
    ```

### Coding

For guidelines on writing code, see the [Coding Style Guide](style-guide.html).